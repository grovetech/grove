I"<p>If you are a network (or systems) administrator, you know how crucial it is to have the right tools for the job. One of the toughest tools to really nail down is a network monitoring tool. Although there are plenty of such tools out there, they range from the over-priced to the under-featured. Where do you look for any sort of middle ground where features don’t lose out to price?</p>

<p>Zenoss is an outstanding, enterprise-ready network monitoring tool that includes all of the features you are accustomed to finding in a much costlier solution. Many a network administrator would do well to deploy such a tool.</p>

<p>Zenoss Open Source Edition is for any network administrator who needs a one-stop-shop-tool for monitoring all devices on a network without having to empty their IT budget, nor waist a week’s worth of work to get it up and running. Zenoss is for any size network, from a small business to a large enterprise.</p>

<p>Zenoss solves the problem of being able to keep a close, constant watch on your network hardware to ensure it is running efficiently and well. And unlike Nagios, Zenoss doesn’t require the administrator to edit configuration files in order to set up monitors for devices. Zenoss brings a much simpler Web-based interface from start to finish.</p>

<p><strong>Installing Zenoss</strong></p>

<p>We will be installing the Zenoss Virtual Appliance and running that on VMWare Fusion 6 PRO on Mavericks 10.9 headless on a Mac Mini server in our network. This is a perfect solution for OSX Admins who need a Network tool in their environment.</p>

<p><strong>Installing the Appliance</strong></p>

<p>Follow these steps to download and install the Zenoss appliance.</p>

<ol>
  <li>Download one of the Zenoss Virtual Appliance files (zenoss-Version-86.vmware.zip or zenoss-Version-x64.vmware.zip) from https://www.zenoss.com/download.</li>
  <li>Unzip the file into a working directory.</li>
  <li>Start VMWare Fusion 6 Pro.</li>
  <li>Use VMWare to navigate to the directory where you unzipped the Zenoss Virtual Appliance package, and then open the Zenoss Virtual Appliance.</li>
  <li>After loading the appliance, the virtual machine window displays a message similar to:</li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Welcome to Zenoss

To access the Zenoss Management Console, please browse to: https://xxx.xxx.xxx:8080 </code></pre></figure>

<p><strong>Note</strong>: If this message does not appear, then you may need to change the VMware player network connection option from Bridged to NAT.</p>

<ol>
  <li>Log in as user root. The default root password is <strong><em>zenoss</em></strong>.</li>
  <li>Open a new Web browser, and then enter the URL that appears in the login screen.</li>
  <li>The Zenoss Setup Wizard appears.</li>
</ol>

<p><strong>Whats Next?</strong></p>

<p>After installing Zenoss, go to the section titled “Quick Start” in the guide titled Getting Started with Zenoss. There you will find instructions for initial setup tasks and basic information to help you begin using Zenoss.</p>

<p>Download the guide (in Portable Document Format) from the Documentation area of the Zenoss Web site: <a href="https://community.zenoss.org/community/documentation">https://community.zenoss.org/community/documentation</a></p>

<p><strong>Port Forwarding the website</strong></p>

<p>In order to see the webpage that is running in your VMWare Environment you need to edit your VMWare settings to allow access through the port on your system to the port on the VMWare appliance.</p>

<p>VMware Fusion supports NAT port-forwarding, which in short, lets the host machine to forward traffic directed to a set of configured ports in a guest VM. To set this up, I needed to do the following:</p>

<p>Edit the NAT configuration file to add the list of ports to be forwarded in this mode. To support HTTP proxy requests, I added port 8080 forwarding to the incomingtcp section of this file.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>pico <span class="s2">"/Library/Application Support/VMware Fusion/vmnet8/nat.conf"</span>
<span class="o">[</span>incomingtcp]
8080 <span class="o">=</span> 192.168.19.69:8080
...</code></pre></figure>

<p>Restart VMware Fusion networking.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo</span> <span class="s2">"/Library/Application Support/VMware Fusion/boot.sh"</span> <span class="nt">--restart</span></code></pre></figure>

<p>No restart of VMware Fusion application or the guest VM is necessary. This configuration change takes effect immediately, and from this point on the host machine acts as a stand in for the guest and will forward all HTTP proxy requests to the guest VM.</p>

<p><strong>Putting it all together</strong></p>

<p>Now that you have Zenoss running in a window in VMWare Fusion we want to be able to quit VMWare, logout and then somehow start Zenoss without having the system stay logged in, but how? The answer is a tool called vmrun, and it’s included (but hidden) with VMWare Fusion. In the VMWare Fusion application bundle you’ll find a Contents/Library folder with a number of scripts and tools, one of them being vmrun. On my Mac I created a symlink to the vmrun binary in /usr/local/bin so it’s available in my PATH.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">ln</span> /usr/local/bin/vmrun  <span class="s2">"/Applications/VMware Fusion.app/Contents/Library/vmrun"</span></code></pre></figure>

<p>With that taken care of I can start up a headless VM instance with something like</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vmrun <span class="nt">-T</span> fusion start <span class="s2">"/path/to/zenosss.vmwarevm/zenosss.vmx"</span> nogui</code></pre></figure>

<p>You will want to do this through SSH so that you can have your machine logged out. From your laptop SSH into the system and then run this command. You can exit your SSH session and Zenoss will still run. Enjoy!</p>

:ET