I"ø<p>The DNS interface in Server Admin.app is not suitable for doing a split-horizon DNS configuration. It simply doesn‚Äôt expose all of the flexibility of bind that you need to pull off such a configuration.</p>

<p>If you poke around the bind config files on your OS X Server, you‚Äôll be able to see how apple has set them up so that you can edit them directly without confusing the GUI. /var/named contains zone files that you may edit, and they include corresponding files in /var/named/zones which you should not edit. They‚Äôve done something similar for /etc/named.conf and the files in /etc/dns/.</p>

<p>Having said that, I recommend not doing both internal and external resolving for split-horizon DNS on your server, mainly because:</p>

<ol>
  <li>It‚Äôs kind of complicated, and you lose any convenience you had when you were able to use the GUI exclusively</li>
  <li>You have NAT, which makes it even more complicated</li>
  <li>There are solutions available from third parties that are better-performing, cheap/free, and more robust</li>
</ol>

<p>In my organization, we use DNS in Mac OS X Server extensively for the internal part of a split-horizon setup. We use the ‚ÄúAdvanced DNS‚Äù part of a network solutions account for the external part. It comes free with the domains we‚Äôve purchased, and has redundancy and speed far greater than what I could justify for hosting a handful or externally-resolving names myself.</p>

<p>You need to reconfigure BIND to use ‚Äúviews‚Äù with two different versions of your zone file, such that access from inside your network gives the 192.168.1/24 (internal) addresses, but requests forwarded from outside (via your 2-Wire router) give out your static public IP.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">acl internal <span class="o">{</span>
    127.0.0.0/8<span class="p">;</span>
    192.168.1.0/24<span class="p">;</span>
<span class="o">}</span><span class="p">;</span>

view <span class="s2">"internal"</span> <span class="o">{</span>
    match-clients <span class="o">{</span> internal<span class="p">;</span> <span class="o">}</span><span class="p">;</span>
    zone <span class="s2">"mydomain.com"</span> <span class="o">{</span>
        <span class="nb">type </span>master<span class="p">;</span>
        file <span class="s2">"/etc/bind/internal/db.mydomain.com"</span><span class="p">;</span>
     <span class="o">}</span><span class="p">;</span>
<span class="o">}</span><span class="p">;</span>

view <span class="s2">"external"</span> <span class="o">{</span>
    match-clients <span class="o">{</span> any<span class="p">;</span> <span class="o">}</span><span class="p">;</span>
    zone <span class="s2">"mydomain.com"</span> <span class="o">{</span>
        <span class="nb">type </span>master<span class="p">;</span>
        file <span class="s2">"/etc/bind/external/db.mydomain.com"</span><span class="p">;</span>
    <span class="o">}</span><span class="p">;</span>
<span class="o">}</span><span class="p">;</span></code></pre></figure>

<p>For more information check this out it is a <a href="https://www.howtoforge.com/two%5Fin%5Fone%5Fdns%5Fbind9%5Fviews">How To with more detailed instruction</a>s for Split Horizon DNS configuration.</p>

:ET