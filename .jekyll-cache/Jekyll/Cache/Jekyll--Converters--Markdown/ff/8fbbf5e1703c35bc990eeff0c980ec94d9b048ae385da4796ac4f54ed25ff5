I"R<p>If your like me then your happy that Apple has made several of their wonderful software titles free recently, specifically iLife and iWork for Mavericks. Apple has a defined workflow for deployment of these systems. Their method is to have companies enroll into their <a href="https://www.apple.com/business/vpp/">Volume Licensing Program</a> once enrolled you can download apps from the app store and the iOS store and deploy these seamlessly to your devices with Profile Manager for Mavericks.</p>

<p>All of this hinges on a few things. First your company has to be willing to enroll in Apples Volume Purchasing Program many companies are not interested because many companies are simply looking for a method to deploy FREE software on the App Store not paid software. The second reason why their program is a turn off to many businesses is that you have to provide a <a href="https://www.lexiconn.com/blog/2010/02/five-reasons-your-business-should-have-a-duns-number/">DUNS</a> number many companies do not have one, and are not at the point where they are looking to get one.</p>

<blockquote>
  <p><a href="https://derflounder.wordpress.com/2013/08/22/downloading-apples-server-app-installer-package/" title="Source"> Source </a> – Rich Trouton a hugely talented individual who originally wrote this article has been adapted below to show how to package the iLife Suite for deployment using MUNKI. Also combined a few comments from the original article to keep things consistent.</p>
</blockquote>

<p>All that being said this article is a walk through of how to obtain the installer file that is downloaded to your system when installing free software on the Mac App Store. You can only use this process if your looking to obtain the installer for free software or for software you have purchased.</p>

<p>For this tutorial I will be walking through downloading Keynote.app as a package that can be used for deployment with Casper, Munki, ARD and Deploy Studio Server.</p>

<p>To install Keynote.app, the Mac App Store will download an installer package from Apple, install Keynote.app, then delete the installer package as part of the post-installation clean-up. However, it is possible to make the App Store leave behind a copy.</p>

<p>Go to a machine that does not have Server.app installed.</p>

<p>If it is open, quit out the App Store application</p>

<p>Open Terminal and run the following command</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">defaults write /Library/Preferences/com.apple.appstore ShowDebugMenu <span class="nt">-bool</span> <span class="nb">true</span></code></pre></figure>

<p>Launch the App Store application. It should now have a Debug menu showing.</p>

<p>If needed, sign into the App Store and go to Purchases. From there, find Keynote.</p>

<p>Begin the installation process for Keynote, then click the Pause button to pause the download.</p>

<p>Under the Debug menu, select Show Download Folder</p>

<p>At this point, you should see a folder inside the displayed folder. In that directory, you’ll see a package with a long randomized name. That will be the Keynote.app installer package.</p>

<p>In Terminal, run the following command</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">ln</span> /path/to/package_from_mac_app_store_name_here.pkg /path/to/name_you_want_to_save_package_as_here.pkg</code></pre></figure>

<p>Using the ln command will set up a hard link to the downloaded installer package. This will create name_you_want_to_save_package_as_here.pkg in the location specified, which is then linked to the contents of package_from_mac_app_store_name_here.pkg. The reason to do this is that the hard-linked name_you_want_to_save_package_as_here.pkg will not be deleted when the Mac App Store deletes package_from_mac_app_store_name_here.pkg from the Mac as part of the post-installation cleanup.</p>

<p>Once the installation finishes, name_you_want_to_save_package_as_here.pkg will available as a signed Keynote.app installer package. From there, you can use it on its own or as part of a deployment workflow.</p>

<p>Alternatively If you unload the installer daemon before installing from the MAS you don’t need to bother with the pause/hard link/resume step for each application you want to capture.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>launchctl unload /System/Library/LaunchDaemons/com.apple.installd.plist</code></pre></figure>

<p>When attempting to install an application from the MAS at the time of installation you’ll be greeted with an error: “The application could not be downloaded. There was a problem with the system installer tool.”</p>

<p>If you don’t click the Cancel or Retry buttons you’ll be able to browse to ~/Library/Application Support/AppStore to access your packages.</p>

<p>This should make things easier if you’re getting the latest updates for multiple MAS apps.</p>

<p>The downside here is that if you use this method to deploy App Store Apps then you will need to package all updates and deploy updates for that app the same way.</p>

:ET